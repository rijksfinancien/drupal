(function(e){function t(t){for(var r,a,l=t[0],c=t[1],o=t[2],d=0,h=[];d<l.length;d++)a=l[d],i[a]&&h.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(h.length)h.shift()();return s.push.apply(s,o||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,l=1;l<n.length;l++){var c=n[l];0!==i[c]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={app:0},s=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var o=0;o<l.length;o++)t(l[o]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0163":function(e,t,n){"use strict";var r=n("3b00"),i=n.n(r);i.a},"034f":function(e,t,n){"use strict";var r=n("64a9"),i=n.n(r);i.a},"1c11":function(e,t,n){"use strict";var r=n("bdd3"),i=n.n(r);i.a},"25aa":function(e,t,n){"use strict";var r=n("5d5d"),i=n.n(r);i.a},"38a3":function(e,t,n){},"3b00":function(e,t,n){},"3f02":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),i=n("5f5b");n("ab8b"),n("2dd8");r["default"].use(i["a"]);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"main"}},[e.initialized?[n("div",{attrs:{id:"header"}},[n("Header",{on:{resetSelection:e.onResetSelection}})],1),n("div",{attrs:{id:"body"}},[n("div",{attrs:{id:"receivers"}},[n("Receivers",{ref:"receivers"})],1),n("div",{attrs:{id:"chapters"}},[n("Chapters",{ref:"chapters"})],1),n("div",{attrs:{id:"right-column"}},[n("div",{attrs:{id:"bar-chart"}},[n("BarChart")],1),n("div",{attrs:{id:"years"}},[n("Years")],1),n("div",{attrs:{id:"instruments"}},[n("Instruments")],1)])])]:[n("div",{attrs:{id:"loadMessage"}},[n("b-spinner",{attrs:{small:""}}),n("span",[e._v("Laden van gegevens...")])],1)]],2)])},a=[],l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"main"}},[e.waitingForResults?[r("div",{attrs:{id:"spinner"}},[r("b-spinner",{attrs:{small:""}})],1)]:[r("div",{attrs:{id:"buttonArea"}},[r("b-button",{attrs:{id:"button",variant:"outline-secondary"},on:{click:e.homeButtonClicked}},[r("img",{attrs:{src:n("fbf5")}})]),e._v("\n      Terug naar begin\n    ")],1)]],2)},c=[],o={computed:{waitingForResults:function(){return this.$store.getters.waitingForResults}},methods:{homeButtonClicked:function(){console.log("home button clicked"),this.$store.dispatch("resetSelection"),this.$emit("resetSelection")}}},u=o,d=(n("b7fe"),n("2877")),h=Object(d["a"])(u,l,c,!1,null,"4935a952",null),f=h.exports,m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"main"}},[n("div",{staticClass:"title"},[e._v("Verstrekkers")]),n("b-input-group",{staticClass:"search-field"},[n("b-form-input",{attrs:{placeholder:"Zoek verstrekker"},model:{value:e.searchTerm,callback:function(t){e.searchTerm=t},expression:"searchTerm"}}),n("b-input-group-append",[n("b-button",{attrs:{variant:"outline-secondary"},on:{click:function(t){return e.clearSearch()}}},[e._v("x")])],1)],1),n("div",{attrs:{id:"table"}},[n("b-table",{attrs:{small:"",hover:"",fields:e.fields,items:e.visibleNodes},on:{"row-clicked":e.onRowClicked},scopedSlots:e._u([{key:"colorBox",fn:function(t){return[1==t.item.level?n("div",{staticClass:"block",style:{"background-color":t.item.color}}):e._e()]}},{key:"name",fn:function(t){return[n("div",{class:{chapter:1==t.item.level,policy:2==t.item.level,regulation:3==t.item.level,selected:null!=e.selectedRegulation&&t.item.id==e.selectedRegulation.id}},[e._v("\n          "+e._s(t.item.name)+"\n        ")])]}},{key:"realisatie",fn:function(t){return[n("div",{staticClass:"text-right",class:{chapter:1==t.item.level,policy:2==t.item.level,regulation:3==t.item.level},domProps:{innerHTML:e._s(e.formatAmount(t.item.realisatie[e.selectedYear]))}})]}}])})],1)],1)},p=[],v=(n("7f7f"),n("a481"),n("6b54"),n("ac6a"),n("55dd"),{data:function(){return{fields:[{key:"colorBox",label:""},{key:"name",label:"Naam"},{key:"realisatie",label:"Realisatie"}],searchTerm:""}},computed:{policyTree:function(){var e=this.$store.getters.policyTree;return null!=e&&(e.showChildren=!0,this.sortTree(e)),e},visibleNodes:function(){return null==this.policyTree?[]:this.getListOfVisibleNodes(this.policyTree)},selectedYear:function(){return this.$store.getters.selectedYear},selectedRegulation:function(){return this.$store.getters.selectedRegulation}},methods:{sortTree:function(e){var t=this;e.children.sort(function(e,n){return n.realisatie[t.selectedYear]-e.realisatie[t.selectedYear]}),e.children.forEach(function(e){t.sortTree(e)})},getListOfVisibleNodes:function(e){var t=this,n=[];return 0!=e.level&&(this.searchTerm.length<=2||this.searchTerm.length>2&&(e.isSearchResult||e.descendantIsSearchResult))&&(n=[e]),e.showChildren&&e.children.forEach(function(e){n=n.concat(t.getListOfVisibleNodes(e))}),n},onRowClicked:function(e){this.$set(e,"showChildren",!e.showChildren),3==e.level&&(null==this.selectedRegulation||this.selectedRegulation.id!=e.id?this.$store.dispatch("selectRegulation",e):this.$store.dispatch("selectRegulation",null))},formatAmount:function(e){var t=Math.round(e).toString(),n=/(\d+)(\d{3})/;while(n.test(t))t=t.replace(n,"$1.$2");return"€&nbsp;"+t},findNodes:function(e){var t=this;e.isSearchResult=-1!=e.name.toLowerCase().indexOf(this.searchTerm.toLowerCase());var n=!1;return e.children.forEach(function(e){n=n||t.findNodes(e)}),e.descendantIsSearchResult=n,e.isSearchResult||e.descendantIsSearchResult},collapseTree:function(e){var t=this;e.showChildren=0==e.level,e.children.forEach(function(e){t.collapseTree(e)})},deCollapseTree:function(e){var t=this;e.showChildren=!0,e.children.forEach(function(e){t.deCollapseTree(e)})},clearSearch:function(){this.searchTerm=""}},watch:{searchTerm:function(){this.searchTerm.length>2?(this.findNodes(this.policyTree),this.deCollapseTree(this.policyTree)):this.collapseTree(this.policyTree)}}}),g=v,E=(n("25aa"),Object(d["a"])(g,m,p,!1,null,"1501aa65",null)),T=E.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"main"}},[n("div",[n("span",{staticClass:"title"},[e._v("Ontvangers")]),n("span",{staticClass:"subTitle"},[e._v(" ( "+e._s(e.slicedItems.length))]),e.items.length>e.slicedItems.length?n("span",{staticClass:"subTitle"},[e._v(" / "+e._s(e.items.length))]):e._e(),n("span",{staticClass:"subTitle"},[e._v(" )")])]),n("b-input-group",{staticClass:"search-field"},[n("b-form-input",{attrs:{placeholder:"Zoek ontvanger"},model:{value:e.searchTerm,callback:function(t){e.searchTerm=t},expression:"searchTerm"}}),n("b-input-group-append",[n("b-button",{attrs:{variant:"outline-secondary"},on:{click:function(t){return e.clearSearch()}}},[e._v("x")])],1)],1),n("div",{attrs:{id:"table"}},[n("b-table",{attrs:{small:"",hover:"",fields:e.fields,items:e.slicedItems},on:{"row-clicked":e.onRowClicked},scopedSlots:e._u([{key:"naam",fn:function(t){return[n("div",{staticClass:"receiver",class:{selected:null!=e.selectedReceiver&&t.item.naam==e.selectedReceiver.naam}},[e._v("\n          "+e._s(t.item.naam)+"\n        ")])]}},{key:"realisatie",fn:function(t){return[n("div",{staticClass:"text-right receiver",domProps:{innerHTML:e._s(e.formatAmount(t.value[e.selectedYear]))}})]}}])})],1)],1)},S=[],_={data:function(){return{fields:[{key:"naam",label:"Naam"},{key:"realisatie",label:"Realisatie"}],searchTerm:"",limitNrResults:100}},computed:{receivers:function(){return this.$store.getters.receivers},items:function(){var e=this;return this.searchTerm.length>2?this.sortedReceivers.filter(function(t){return-1!=t.naam.toString().toLowerCase().indexOf(e.searchTerm.toLowerCase())}):this.sortedReceivers},slicedItems:function(){return this.items.slice(0,this.limitNrResults)},sortedReceivers:function(){var e=this;return this.receivers.filter(function(t){return 0!=t.realisatie[e.selectedYear]}).sort(function(t,n){return n.realisatie[e.selectedYear]-t.realisatie[e.selectedYear]})},selectedYear:function(){return this.$store.getters.selectedYear},selectedReceiver:function(){return this.$store.getters.selectedReceiver}},methods:{formatAmount:function(e){var t=Math.round(e).toString(),n=/(\d+)(\d{3})/;while(n.test(t))t=t.replace(n,"$1.$2");return"€&nbsp;"+t},onRowClicked:function(e){var t=null==this.selectedReceiver||e.naam!=this.selectedReceiver.naam?e:null;this.$store.dispatch("selectReceiver",t)},clearSearch:function(){this.searchTerm=""}}},R=_,y=(n("d580"),Object(d["a"])(R,b,S,!1,null,"970e0abc",null)),I=y.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"bar_area",attrs:{id:"bar_area"}},[n("div",{staticClass:"title"},[e._v("Totalen per jaar")]),n("svg",{attrs:{width:e.width,height:e.height}},e._l(e.years,function(t){return n("g",{key:t,attrs:{transform:"translate("+e.getXPosForYear(t)+",0)"}},e._l(e.blocks[t],function(r){return n("rect",{key:r.label+"_"+t,attrs:{x:"0",y:Math.max(0,e.height-r.y-r.height-e.margin.bottom),width:e.barWidth,height:r.height,fill:r.color}})}),0)}),0)])},A=[],k=(n("8615"),n("75fc")),w={data:function(){return{width:0,height:300,margin:{left:20,right:20,top:20,bottom:0},barSpacing:40}},computed:{years:function(){return this.$store.getters.years},colors:function(){return this.$store.getters.colors},policyTree:function(){return this.$store.getters.policyTree},scaleFactorY:function(){var e=Math.max.apply(Math,Object(k["a"])(Object.values(this.policyTree.realisatie))),t=(this.height-this.margin.top-this.margin.bottom)/e;return Math.max(0,t)},barWidth:function(){var e=this.width-this.margin.left-this.margin.right,t=e-(this.years.length-1)*this.barSpacing,n=t/this.years.length;return Math.max(0,n)},chapters:function(){if(null==this.policyTree)return[];var e=this.policyTree.children.map(function(e){return{label:e.id,realisatie:e.realisatie,color:e.color}}),t=this.years[this.years.length-1];return e.sort(function(e,n){return n.realisatie[t]-e.realisatie[t]}),e},blocks:function(){var e=this,t={};return this.years.forEach(function(n){t[n]=[];var r=0;e.chapters.forEach(function(i){var s={y:r,height:+i.realisatie[n]*e.scaleFactorY,color:i.color,label:i.label};r+=s.height,t[n].push(s)})}),t}},mounted:function(){this.width=this.$refs.bar_area.clientWidth},methods:{getXPosForYear:function(e){return this.margin.left+this.years.indexOf(e)*(this.barWidth+this.barSpacing)}}},O=w,$=(n("89ed"),Object(d["a"])(O,C,A,!1,null,"d1cfa4e2",null)),N=$.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"main"}},[n("div",{attrs:{id:"checkBoxes"}},e._l(e.years,function(t){return n("b-form-radio",{key:t,attrs:{value:t},on:{change:function(n){return e.boxClicked(t)}},model:{value:e.selectedOption,callback:function(t){e.selectedOption=t},expression:"selectedOption"}},[e._v("\n        "+e._s(t)+"\n      ")])}),1)])},L=[],Y={data:function(){return{selectedOption:""}},mounted:function(){this.selectedOption=this.selectedYear},computed:{years:function(){return this.$store.getters.years},selectedYear:function(){return this.$store.getters.selectedYear}},watch:{selectedYear:function(){this.selectedOption=this.selectedYear}},methods:{boxClicked:function(e){e!=this.selectedYear&&this.$store.commit("SET_SELECTED_YEAR",e)}}},M=Y,j=(n("1c11"),Object(d["a"])(M,x,L,!1,null,"a2d6d892",null)),D=j.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"main"}},[n("div",{staticClass:"title"},[e._v("Selecteer instrument(en)")]),n("b-form-checkbox",{model:{value:e.allSelected,callback:function(t){e.allSelected=t},expression:"allSelected"}},[e._v("(De)selecteer alles")]),n("div",{attrs:{id:"table"}},[n("b-table",{attrs:{small:"",hover:"",fields:e.fields,items:e.sortedInstruments},scopedSlots:e._u([{key:"naam",fn:function(t){return[n("b-form-checkbox",{staticClass:"instrument",attrs:{checked:e.selectedInstruments.some(function(e){return e.naam==t.value})},on:{change:function(n){return e.selectionChanged(t.item)}}},[e._v("\n          "+e._s(t.value)+"\n        ")])]}},{key:"realisatie",fn:function(t){return[n("div",{staticClass:"text-right instrument",domProps:{innerHTML:e._s(e.formatAmount(t.value[e.selectedYear]))}})]}}])})],1)],1)},U=[],P=(n("7514"),{data:function(){return{fields:[{key:"naam",label:"Naam"},{key:"realisatie",label:"Realisatie"}],allSelected:!0}},computed:{allInstruments:function(){return this.$store.getters.allInstruments},selectedInstruments:function(){return this.$store.getters.selectedInstruments},instruments:function(){return this.$store.getters.instruments},years:function(){return this.$store.getters.years},sortedInstruments:function(){var e=this,t=this.allInstruments.slice();return t.forEach(function(t){var n=e.instruments.find(function(e){return e.naam==t.naam});null==n?(t.realisatie={},e.years.forEach(function(e){t.realisatie[e]=0})):t.realisatie=n.realisatie}),t.sort(function(t,n){return n.realisatie[e.selectedYear]-t.realisatie[e.selectedYear]})},selectedYear:function(){return this.$store.getters.selectedYear}},methods:{formatAmount:function(e){var t=Math.round(e).toString(),n=/(\d+)(\d{3})/;while(n.test(t))t=t.replace(n,"$1.$2");return"€&nbsp;"+t},selectionChanged:function(e){var t=this.selectedInstruments.slice(),n=t.indexOf(e);-1!=n?t.splice(n,1):t.push(e),this.$store.dispatch("selectInstruments",t)},selectAll:function(){this.$store.dispatch("selectInstruments",this.allInstruments)},deselectAll:function(){this.$store.dispatch("selectInstruments",[])}},watch:{allSelected:function(){this.allSelected?this.selectAll():this.deselectAll()}}}),G=P,V=(n("0163"),Object(d["a"])(G,F,U,!1,null,"43d3b5cc",null)),B=V.exports,W={name:"app",components:{Header:f,Chapters:T,Receivers:I,BarChart:N,Years:D,Instruments:B},created:function(){this.$store.dispatch("init")},computed:{initialized:function(){return this.$store.getters.initialized}},methods:{onResetSelection:function(){console.log("onResetSelection"),this.$refs.receivers.clearSearch(),this.$refs.chapters.clearSearch()}}},z=W,J=(n("034f"),Object(d["a"])(z,s,a,!1,null,null,null)),X=J.exports,H=n("2f62");n("6d93");r["default"].use(H["a"]);var Z="/modules/custom/rijksfinancien_visuals/assets/wie_ontvingen/config/config.json ",K=["beleid","hoofdstukken","artikelen","regelingen"],Q=new H["a"].Store({state:{api_endpoint:"",initialized:!1,waitingForResults:!1,years:[],selectedYear:null,policyTree:null,selectedRegulation:null,policyTreeVisibility:null,receivers:[],selectedReceiver:null,instruments:[],allInstruments:[],selectedInstruments:[],colors:{}},getters:{api_endpoint:function(e){return e.api_endpoint},initialized:function(e){return e.initialized},waitingForResults:function(e){return e.waitingForResults},years:function(e){return e.years},selectedYear:function(e){return e.selectedYear},policyTree:function(e){return e.policyTree},selectedRegulation:function(e){return e.selectedRegulation},receivers:function(e){return e.receivers},selectedReceiver:function(e){return e.selectedReceiver},instruments:function(e){return e.instruments},allInstruments:function(e){return e.allInstruments},selectedInstruments:function(e){return e.selectedInstruments},colors:function(e){return e.colors}},mutations:{SET_API_ENDPOINT:function(e,t){e.api_endpoint=t},SET_INITIALIZED:function(e,t){e.initialized=t},SET_WAITING_FOR_RESULTS:function(e,t){e.waitingForResults=t},SET_YEARS:function(e,t){e.years=t},SET_SELECTED_YEAR:function(e,t){e.selectedYear=t},SET_POLICY_TREE:function(e,t){e.policyTree=t},SET_SELECTED_REGULATION:function(e,t){e.selectedRegulation=t},SET_RECEIVERS:function(e,t){e.receivers=t},SET_SELECTED_RECEIVER:function(e,t){e.selectedReceiver=t},SET_INSTRUMENTS:function(e,t){e.instruments=t},SET_ALL_INSTRUMENTS:function(e,t){e.allInstruments=t},SET_SELECTED_INSTRUMENTS:function(e,t){e.selectedInstruments=t},SET_COLORS:function(e,t){e.colors=t}},actions:{init:function(e){fetch(Z).then(function(e){return e.json()}).then(function(t){var n=t.years.sort();e.commit("SET_YEARS",n),e.commit("SET_SELECTED_YEAR",n[n.length-1]),e.commit("SET_COLORS",t.colors),e.commit("SET_API_ENDPOINT",t.api_endpoint),e.dispatch("getData")})},getData:function(e){console.log("GETTING DATA"),e.commit("SET_WAITING_FOR_RESULTS",!0);var t=e.getters.api_endpoint+"?year[]="+e.getters.years.join("&year[]=");null!=e.getters.selectedReceiver&&(t+="&receiver[]="+e.getters.selectedReceiver.naam),null!=e.getters.selectedRegulation&&(t+="&regulation[]="+e.getters.selectedRegulation.name),e.getters.selectedInstruments.length>0&&e.getters.selectedInstruments.length<e.getters.allInstruments.length&&(t+="&instrument[]="+e.getters.selectedInstruments.map(function(e){return e.naam}).join("&instrument[]=")),fetch(t).then(function(e){return e.json()}).then(function(t){var n=null==e.getters.selectedReceiver&&null==e.getters.selectedRegulation,r=q(t.beleid,0,"",n),i=e.getters.colors;r.children.forEach(function(e){e.color=null!=i[e.name]?i[e.name].color:"#007bc7"}),e.commit("SET_POLICY_TREE",r),e.commit("SET_RECEIVERS",t.ontvangers),e.commit("SET_INSTRUMENTS",t.instrumenten),e.getters.initialized||(e.commit("SET_INITIALIZED",!0),e.commit("SET_ALL_INSTRUMENTS",t.instrumenten),e.commit("SET_SELECTED_INSTRUMENTS",t.instrumenten)),e.commit("SET_WAITING_FOR_RESULTS",!1)})},selectReceiver:function(e,t){e.commit("SET_SELECTED_RECEIVER",t),e.dispatch("getData")},selectRegulation:function(e,t){e.commit("SET_SELECTED_REGULATION",t),e.dispatch("getData")},selectInstruments:function(e,t){e.commit("SET_SELECTED_INSTRUMENTS",t),t.length>0&&e.dispatch("getData")},resetSelection:function(e){e.commit("SET_SELECTED_RECEIVER",null),e.commit("SET_SELECTED_REGULATION",null),e.commit("SET_SELECTED_INSTRUMENTS",e.getters.allInstruments),e.dispatch("getData")}}});function q(e,t,n,r){var i=0==t?e.naam:n+"_"+e.naam,s={id:i,name:e.naam.toString(),level:t,realisatie:e.realisatie,children:[],showChildren:!r};return t<K.length-1&&e[K[t+1]].forEach(function(e){s.children.push(q(e,t+1,i,r))}),s}r["default"].config.productionTip=!1,new r["default"]({store:Q,render:function(e){return e(X)}}).$mount("#app")},"5d5d":function(e,t,n){},"64a9":function(e,t,n){},7284:function(e,t,n){},"89ed":function(e,t,n){"use strict";var r=n("3f02"),i=n.n(r);i.a},b7fe:function(e,t,n){"use strict";var r=n("38a3"),i=n.n(r);i.a},bdd3:function(e,t,n){},d580:function(e,t,n){"use strict";var r=n("7284"),i=n.n(r);i.a},fbf5:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsSAAALEgHS3X78AAAAgUlEQVRIx+2WSwqAMAxEZ8SL9ma96bjQgv/GNgEFA4Fu8l6yGUpJiKwBwWUWkMwktXQ2GyRVG0AGoF1n02wj3CzpgZskvfCqxAN+K/GCX0o84acSb/hBEgHfSCgJJEMCSRJLVKQAfgIwX7DKG3ltXt5jy9CTZd4T17/guwJ+/lcxAeKFn/JOjJ0TAAAAAElFTkSuQmCC"}});